{% extends "layouts/modal.html" %}

{% block modal_content %}

  <section id="user_edit">
    <!-- user edit form -->
    {% if error %}
      {% include "partials/user/user_edit_error.html" %}
    {% endif %}

    <form
      id="user-edit"
      hx-put="/users/modal/{{ user.id }}"
      hx-target="#modal"
      hx-target-error="#user_edit"
      hx-swap="outerHTML"
      method="put">
      <!-- CSRF Token -->{{ form.csrf_token() }}
      <!-- Full Name -->
      <div class="sm:grid sm:grid-cols-3 sm:items-start sm:gap-4 sm:py-6">
        <label
          class="block text-sm font-medium leading-6 text-gray-900 sm:pt-1.5"
          for="full_name"
        > Full Name </label>
        <div class="mt-2 sm:col-span-2 sm:mt-0">
          <input
            autocomplete="given-name"
            class="block w-full rounded-md py-1.5 text-gray-900 shadow-sm ring-1 ring-inset placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-slate-600 sm:max-w-xs sm:text-sm sm:leading-6
          {{ 'border-red-600 ring-red-600' if form.full_name.errors else 'ring-gray-300' }}"
            id="full_name"
            name="full_name"
            type="text"
            value="{{ form.full_name.data }}"
            required
          />
          {% if form.full_name.errors %}
            <p class="mt-2 text-sm text-red-600">{{ form.full_name.errors[0] }}</p>
          {% endif %}
        </div>
      </div>
      <!-- Email Address -->
      <div class="sm:grid sm:grid-cols-3 sm:items-start sm:gap-4 sm:py-6">
        <label
          class="block text-sm font-medium leading-6 text-gray-900 sm:pt-1.5"
          for="email"
        > Email address </label>
        <div class="mt-2 sm:col-span-2 sm:mt-0">
          <input
            autocomplete="email"
            class="block w-full rounded-md py-1.5 text-gray-900 shadow-sm ring-1 ring-inset placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-slate-600 sm:max-w-md sm:text-sm sm:leading-6
          {{ 'border-red-600 ring-red-600' if form.email.errors else 'ring-gray-300' }}"
            id="email"
            name="email"
            type="email"
            value="{{ form.email.data }}"
            required
          />
          {% if form.email.errors %}
            <p class="mt-2 text-sm text-red-600">{{ form.email.errors[0] }}</p>
          {% endif %}
        </div>
      </div>
      <!-- Status Checkboxes -->
      <fieldset>
        <legend class="sr-only">Status</legend>
        <div class="sm:grid sm:grid-cols-3 sm:gap-4 sm:py-6">
          <div aria-hidden="true" class="text-sm font-semibold leading-6 text-gray-900">
            Status
          </div>
          <div class="mt-4 sm:col-span-2 sm:mt-0">
            <div class="max-w-lg space-y-6">
              <div class="relative flex gap-x-3">
                <div class="flex h-6 items-center">
                  <input
                    class="h-4 w-4 rounded border-gray-300 text-slate-600 focus:ring-slate-600"
                    id="is_active"
                    name="is_active"
                    type="checkbox"
                    {% if form.is_active.data %}
                      checked
                    {% endif %}
                  />
                </div>
                <div class="text-sm leading-6">
                  <label class="font-medium text-gray-900" for="is_active">Active</label>
                  <p class="mt-1 text-gray-600">is active</p>
                </div>
              </div>
              <div class="relative flex gap-x-3">
                <div class="flex h-6 items-center">
                  <input
                    class="h-4 w-4 rounded border-gray-300 text-slate-600 focus:ring-slate-600"
                    id="is_superuser"
                    name="is_superuser"
                    type="checkbox"
                    {% if form.is_superuser.data %}
                      checked
                    {% endif %}
                  />
                </div>
                <div class="text-sm leading-6">
                  <label class="font-medium text-gray-900" for="is_superuser">Admin</label>
                  <p class="mt-1 text-gray-600">has admin privileges</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </fieldset>
      <!-- Save/Cancel Buttons -->
      <div class="mt-6 flex items-center justify-end gap-x-2">
        <button
          form="user-edit"
          type="submit"
          class="inline-flex justify-center rounded-md bg-black px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-slate-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-600">
          Save
        </button>
        <button
          form="user-edit"
          @click="modal = false"
          class="rounded-md bg-white px-3.5 py-2.5 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50">
          Cancel
        </button>
      </div>
    </form>
  </section>

{% endblock modal_content %}
